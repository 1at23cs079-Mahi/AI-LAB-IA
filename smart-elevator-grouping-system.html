<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Problem 10: Smart Elevator Grouping System</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <style>
        body { background: linear-gradient(180deg, #0f2027 0%, #203a43 50%, #2c5364 100%); }
        .problem-container { background: linear-gradient(135deg, #1c1c1c 0%, #2d2d2d 100%); color: #e0e0e0; border: 1px solid #757575; box-shadow: 0 20px 60px rgba(0, 0, 0, 0.8); }
        .back-button { background: #757575; color: white; border-radius: 0; font-weight: 600; text-transform: uppercase; letter-spacing: 2px; }
        .back-button:hover { background: #9e9e9e; }
        .problem-header { border-bottom: 1px solid #757575; background: #252525; }
        .problem-header h1 { color: #bdbdbd; font-weight: 100; letter-spacing: 3px; text-transform: uppercase; }
        .problem-header .description { color: #9e9e9e; }
        .controls { background: #1c1c1c; border: 1px solid #616161; }
        .controls h3 { color: #bdbdbd; font-weight: 300; text-transform: uppercase; letter-spacing: 2px; }
        .btn { background: linear-gradient(135deg, #616161 0%, #424242 100%); color: white; border-radius: 0; font-weight: 600; text-transform: uppercase; }
        .btn:hover { background: linear-gradient(135deg, #757575 0%, #616161 100%); }
        .btn-secondary { background: transparent; border: 2px solid #757575; }
        .output { background: #1c1c1c; border: 1px solid #616161; color: #e0e0e0; }
        select { background: #2d2d2d; color: #bdbdbd; border: 1px solid #616161; }
    </style>
    <div class="problem-container">
        <a href="batch-b2.html" class="back-button">‚Üê Back to Batch B2</a>
        
        <div class="problem-header">
            <h1>üõó Problem 10: Smart Elevator Grouping System</h1>
            <p class="description">
                Assign elevator requests to 2 elevators serving 6 floors to minimize total travel time.
            </p>
        </div>

        <div class="controls">
            <h3>Elevator Control Panel</h3>
            <div class="control-group">
                <label>Add Request - From Floor:</label>
                <select id="fromFloor">
                    <option value="0">Ground</option>
                    <option value="1">Floor 1</option>
                    <option value="2">Floor 2</option>
                    <option value="3">Floor 3</option>
                    <option value="4">Floor 4</option>
                    <option value="5">Floor 5</option>
                </select>
            </div>
            <div class="control-group">
                <label>To Floor:</label>
                <select id="toFloor">
                    <option value="1">Floor 1</option>
                    <option value="2">Floor 2</option>
                    <option value="3">Floor 3</option>
                    <option value="4">Floor 4</option>
                    <option value="5">Floor 5</option>
                </select>
            </div>
            <button class="btn" onclick="addRequest()">Add Request</button>
            <button class="btn btn-secondary" onclick="generateRandomRequests()">Generate Random Requests</button>
            <button class="btn btn-secondary" onclick="clearRequests()">Clear All</button>
        </div>

        <div id="requestList" class="output" style="display:none;">
            <h3>Pending Requests</h3>
            <div id="requestsTable"></div>
            <button class="btn" onclick="optimizeElevators()" style="margin-top: 15px;">Optimize Assignment</button>
        </div>

        <div id="output" class="output" style="display:none;">
            <h3>Elevator Assignments</h3>
            <div id="resultContent"></div>
            <div class="stats" id="stats"></div>
        </div>
    </div>

    <script>
        let requests = [];
        let elevator1Pos = 0;
        let elevator2Pos = 0;

        function addRequest() {
            const from = parseInt(document.getElementById('fromFloor').value);
            const to = parseInt(document.getElementById('toFloor').value);

            if (from === to) {
                alert('From and To floors must be different');
                return;
            }

            requests.push({id: Date.now(), from, to});
            updateRequestList();
        }

        function generateRandomRequests() {
            requests = [];
            const numRequests = Math.floor(Math.random() * 6) + 5;
            for (let i = 0; i < numRequests; i++) {
                const from = Math.floor(Math.random() * 6);
                let to = Math.floor(Math.random() * 6);
                while (to === from) {
                    to = Math.floor(Math.random() * 6);
                }
                requests.push({id: Date.now() + i, from, to});
            }
            updateRequestList();
        }

        function clearRequests() {
            requests = [];
            updateRequestList();
            document.getElementById('output').style.display = 'none';
        }

        function updateRequestList() {
            const requestList = document.getElementById('requestList');
            const requestsTable = document.getElementById('requestsTable');

            if (requests.length === 0) {
                requestList.style.display = 'none';
                return;
            }

            requestList.style.display = 'block';

            requestsTable.innerHTML = `
                <table>
                    <tr>
                        <th>#</th>
                        <th>From</th>
                        <th>To</th>
                        <th>Direction</th>
                        <th>Distance</th>
                    </tr>
                    ${requests.map((req, i) => `
                        <tr>
                            <td>${i + 1}</td>
                            <td>Floor ${req.from}</td>
                            <td>Floor ${req.to}</td>
                            <td>${req.to > req.from ? '‚¨ÜÔ∏è Up' : '‚¨áÔ∏è Down'}</td>
                            <td>${Math.abs(req.to - req.from)} floors</td>
                        </tr>
                    `).join('')}
                </table>
            `;
        }

        function calculateCost(elevator, assignment) {
            let pos = elevator === 1 ? elevator1Pos : elevator2Pos;
            let totalCost = 0;

            for (const req of assignment) {
                totalCost += Math.abs(pos - req.from); // Travel to pickup
                totalCost += Math.abs(req.to - req.from); // Travel to destination
                pos = req.to;
            }

            return totalCost;
        }

        function optimizeElevators() {
            if (requests.length === 0) return;

            // Greedy assignment: assign each request to elevator with minimum additional cost
            const e1Assignments = [];
            const e2Assignments = [];
            let e1Pos = elevator1Pos;
            let e2Pos = elevator2Pos;

            const sortedRequests = [...requests].sort((a, b) => a.from - b.from);

            for (const req of sortedRequests) {
                const costE1 = Math.abs(e1Pos - req.from) + Math.abs(req.to - req.from);
                const costE2 = Math.abs(e2Pos - req.from) + Math.abs(req.to - req.from);

                if (costE1 <= costE2) {
                    e1Assignments.push(req);
                    e1Pos = req.to;
                } else {
                    e2Assignments.push(req);
                    e2Pos = req.to;
                }
            }

            const e1Cost = calculateCost(1, e1Assignments);
            const e2Cost = calculateCost(2, e2Assignments);
            const totalCost = e1Cost + e2Cost;

            displayResults(e1Assignments, e2Assignments, e1Cost, e2Cost, totalCost);
        }

        function displayResults(e1, e2, cost1, cost2, totalCost) {
            const output = document.getElementById('output');
            const resultContent = document.getElementById('resultContent');
            const stats = document.getElementById('stats');

            output.style.display = 'block';

            resultContent.innerHTML = `
                <div class="alert alert-success">
                    ‚úì Optimal assignment computed! Total travel time: ${totalCost} units
                </div>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 20px;">
                    <div style="background: white; padding: 20px; border-radius: 10px; border-left: 5px solid #3498db;">
                        <h3 style="color: #3498db;">üõó Elevator 1</h3>
                        <p><strong>Assigned Requests:</strong> ${e1.length}</p>
                        <p><strong>Travel Cost:</strong> ${cost1} units</p>
                        <ul style="margin-top: 10px;">
                            ${e1.map(req => `<li>Floor ${req.from} ‚Üí Floor ${req.to}</li>`).join('')}
                        </ul>
                    </div>
                    
                    <div style="background: white; padding: 20px; border-radius: 10px; border-left: 5px solid #e74c3c;">
                        <h3 style="color: #e74c3c;">üõó Elevator 2</h3>
                        <p><strong>Assigned Requests:</strong> ${e2.length}</p>
                        <p><strong>Travel Cost:</strong> ${cost2} units</p>
                        <ul style="margin-top: 10px;">
                            ${e2.map(req => `<li>Floor ${req.from} ‚Üí Floor ${req.to}</li>`).join('')}
                        </ul>
                    </div>
                </div>
            `;

            stats.innerHTML = `
                <div class="stat-card">
                    <div class="label">Total Requests</div>
                    <div class="value">${requests.length}</div>
                </div>
                <div class="stat-card">
                    <div class="label">Elevator 1 Cost</div>
                    <div class="value">${cost1}</div>
                </div>
                <div class="stat-card">
                    <div class="label">Elevator 2 Cost</div>
                    <div class="value">${cost2}</div>
                </div>
                <div class="stat-card">
                    <div class="label">Total Cost</div>
                    <div class="value">${totalCost}</div>
                </div>
            `;
        }
    </script>
</body>
</html>
